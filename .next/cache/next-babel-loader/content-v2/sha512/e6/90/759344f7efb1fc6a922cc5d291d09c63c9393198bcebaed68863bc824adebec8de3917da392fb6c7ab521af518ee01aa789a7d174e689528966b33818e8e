{"ast":null,"code":"// not about creating react components, we define server side functions\n// API routes only run on the server and will never be exposed to the client\n// URL - /api/new-meetup\n// lets us connect\nimport { MongoClient } from \"mongodb\"; // next function\n\nasync function handler(req, res) {\n  if (req.method === \"POST\") {\n    const data = req.body;\n    const client = await MongoClient.connect(\"mongodb+srv://sanindo:hansa@cluster0.h26hfvf.mongodb.net/meetups?retryWrites=true&w=majority\"); // if db doesnt exist it's created on the fly\n\n    const db = client.db(); // collection - table, document - entry\n\n    const meetupsCollection = db.collection(\"meetups\"); // insert one new document into collection.\n    // accepts objects, where result will be object with automatically generated ID\n\n    const result = await meetupsCollection.insertOne(data);\n    console.log(result); // close db once completed\n\n    client.close(); // return a status code with a json response\n\n    res.status(201).json({\n      message: \"Meetup inserted!\"\n    });\n  }\n}\n\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}